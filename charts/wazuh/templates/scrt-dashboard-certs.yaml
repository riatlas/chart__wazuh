{{- $ca := genCA "dashboard-certs-ca" 365 -}}
{{- $cert := genSignedCert "root-ca" nil nil 365 $ca -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "wazuh.fullname" . }}-dashboard-certs
  labels:
  {{- include "wazuh.labels" . | nindent 4 }}
annotations:
  "helm.sh/hook": "pre-install"
  "helm.sh/hook-delete-policy": "before-hook-creation"
data:
  cert.pem: {{ $cert.Cert | b64enc }}
  key.pem: {{ $cert.Key | b64enc }}
  root-ca.pem: {{ $ca.Cert | b64enc }}
type: Opaque